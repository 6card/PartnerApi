<div class="ui stackable grid">
  <div class="row">
    <div class="eight wide column">
      <label>
        Показывать по 
        <select [ngModel]="itemsPerPage" (ngModelChange)="onItemsPerPageChange($event)" >
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="25">25</option>
        </select>
         роликов
      </label>
    </div>
    <div class="eight wide column">
      <label>
        Канал: 
        <select [ngModel]="channelId" (ngModelChange)="onChannelChange($event)" >
            <option *ngFor="let c of channels" [ngValue]="c.Id">{{c.Title}}</option>
        </select>
      </label>
    </div>
  </div>
  <div class="row"  *ngIf="medias && medias.length > 0">
    <div class="seven wide column">
      <div class="table-info">Показаны с {{currentPage * itemsPerPage - itemsPerPage + 1}} по {{(itemsPerPage * currentPage > totalItems) ? totalItems : (itemsPerPage * currentPage)}} из {{totalItems}} роликов</div>
    </div>
    <div class="right aligned nine wide column">

      <pagination *ngIf="currentPage" (goToPage)="pageUpdated($event)" [page]="currentPage" [totalItems]="totalItems" [itemsPerPage]="itemsPerPage"></pagination>

    </div>
  </div>
  <div class="row no-padding"  *ngIf="medias && medias.length > 0">
    <div class="sixteen wide column">
      <table class="ui celled striped table">
        <thead>
          <tr>
            <th>Название</th>
            <th>Время съемки</th>
            <th>Время публикации</th>
            <th>Картинки</th>
            <th>Статус</th>
            <th>Действия</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let media of medias" [id]="media.MediaId">
              <td>
                <a  [routerLink]="['/media', media.MediaId]">{{media.Title}}</a>
              </td>
              <td>{{media.ShootDateUtc | date:'dd-MM-yyyy HH:mm'}}</td>
              <td>{{media.PubDateGMT | date:'dd-MM-yyyy HH:mm'}}</td>
              <td><img class="ui tiny image" [src]="media.ThumbnailUrl"></td>
              <td><div [ngClass]="media.StateColor" class="ui label">{{media.StateName}}</div></td>
              <td>
                <div class="ui buttons">
                  <button class="ui icon button" [routerLink]="['/media', media.MediaId]" title="редактировать"><i class="edit icon"></i></button>
                  <button class="ui red icon button" *ngIf="media.isPossibleToBlock" title="заблокировать" (click)="mediaBlock(media.MediaId)"><i class="lock icon"></i></button>
                  <button class="ui green icon button" *ngIf="media.isPossibleToUnblock" title="разблокировать" (click)="mediaUnblock(media.MediaId)"><i class="unlock icon"></i></button>
                  <button class="ui blue icon button" *ngIf="media.isPossibleToView" title="смотреть видео" (click)="alert('view')"><i class="video play outline icon"></i></button>
                  <a class="ui icon button" href="https://www.newstube.ru/embed/{{media.MediaGuid}}" target="_blank" title="смотреть на сайте" (click)="openViewWindow($event)"><i class="external icon"></i></a>
                </div>
              </td>
          </tr>  
        </tbody>
      </table>
      <div class="ui inverted dimmer" [class.active]="loadingMedia">
        <div class="ui loader"></div>
      </div>
    </div>
  </div>
  <div class="row"  *ngIf="medias && medias.length > 0">
    <div class="seven wide column">
      <div class="table-info">Показаны с {{currentPage * itemsPerPage - itemsPerPage + 1}} по {{(itemsPerPage * currentPage > totalItems) ? totalItems : (itemsPerPage * currentPage)}} из {{totalItems}} роликов</div>
    </div>
    <div class="right aligned nine wide column">

      <pagination *ngIf="currentPage" (goToPage)="pageUpdated($event)" [page]="currentPage" [totalItems]="totalItems" [itemsPerPage]="itemsPerPage"></pagination>

    </div>
  </div>
</div>